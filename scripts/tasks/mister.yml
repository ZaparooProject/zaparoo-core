version: "3"

tasks:
  build-arm:
    desc: Build MiSTer ARM binary
    cmds:
      - task: :zigcc:build-linux-arm
        vars:
          PLATFORM: mister
          APP_BIN: zaparoo.sh

  deploy-arm:
    cmds:
      - task: build-arm
      - scp _build/mister_arm/zaparoo.sh root@${MISTER_IP}:/media/fat/Scripts/zaparoo.sh
      - ssh root@${MISTER_IP} /media/fat/Scripts/zaparoo.sh -service restart