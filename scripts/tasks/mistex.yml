version: "3"

tasks:
  build-arm64:
    desc: Build MiSTeX ARM64 binary
    cmds:
      - task: :zigcc:build-linux-arm64
        vars:
          PLATFORM: mistex
          APP_BIN: zaparoo.sh

  deploy-arm64:
    cmds:
      - task: build-arm64
      - scp _build/mistex_arm64/zaparoo.sh root@${MISTEX_IP}:/media/fat/Scripts/zaparoo.sh
      - ssh root@${MISTEX_IP} /media/fat/Scripts/zaparoo.sh -service restart